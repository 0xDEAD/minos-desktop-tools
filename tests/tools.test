#Based on GNU shtool test suite
#Copyright (c) 1999-2008 Ralf S. Engelschall <rse@engelschall.com>
#Copyright (c) 2014      Javier Lopez        <m@javier.io>

@begin{minos-autostart}
minos-autostart -h; test X"${?}"                               = X"1"
printf "%s" '-h' | minos-autostart; test X"${?}"               = X"1"
minos-autostart -c; test X"${?}"                               = X"1"
printf "%s" '-c' | minos-autostart; test X"${?}"               = X"1"
minos-autostart --help ; test X"${?}"                          = X"1"
printf "%s" '--help' | minos-autostart; test X"${?}"           = X"1"
test X"$(minos-autostart -h 2>&1|head -1)"                     = X"Usage: minos-autostart [options]"
test X"$(printf "%s" '-h' | minos-autostart 2>&1|head -1)"     = X"Usage: minos-autostart [options]"
test X"$(minos-autostart --help 2>&1|head -1)"                 = X"Usage: minos-autostart [options]"
test X"$(printf "%s" '--help' | minos-autostart 2>&1|head -1)" = X"Usage: minos-autostart [options]"
test X"$(minos-autostart -c 2>&1|head -1)"                     = X"minos-autostart: unrecognized option \`-c'"
test X"$(printf "%s" '-c' | minos-autostart 2>&1|head -1)"     = X"minos-autostart: unrecognized option \`-c'"
@end

@begin{minos-config}
minos-config; test X"${?}"                                   = X"1"
minos-config cui; test X"${?}"                               = X"1"
minos-config -h; test X"${?}"                                = X"1"
printf "%s" '-h' | minos-config; test X"${?}"                = X"1"
minos-config -c; test X"${?}"                                = X"1"
printf "%s" '-c' | minos-config; test X"${?}"                = X"1"
minos-config --help ; test X"${?}"                           = X"1"
printf "%s" '--help' | minos-config; test X"${?}"            = X"1"
minos-config --cui; test X"${?}"                             = X"1"
printf "%s" '--cui' | minos-config; test X"${?}"             = X"1"
test X"$(minos-config 2>&1|head -1)"                         = X"Usage: minos-config [options] key"
test X"$(minos-config -h 2>&1|head -1)"                      = X"Usage: minos-config [options] key"
test X"$(printf "%s" '-h' | minos-config 2>&1|head -1)"      = X"Usage: minos-config [options] key"
test X"$(minos-config --help 2>&1|head -1)"                  = X"Usage: minos-config [options] key"
test X"$(printf "%s" '--help' | minos-config 2>&1|head -1)"  = X"Usage: minos-config [options] key"
test X"$(minos-config -c 2>&1|head -1)"                      = X"Option \`-c' requires a config file"
test X"$(printf "%s" '-c' | minos-config 2>&1|head -1)"      = X"Option \`-c' requires a config file"
test X"$(minos-config --cui 2>&1|head -1)"                   = X"minos-config: unrecognized option \`--cui'"
test X"$(printf "%s" '--cui' | minos-config 2>&1|head -1)"   = X"minos-config: unrecognized option \`--cui'"
test X"$(minos-config cui 2>&1)"                             = X""
test X"$(minos-config -c cui 2>&1|head -1)"                  = X"'cui' is not a valid configuration file"
touch config && test X"$(minos-config -c config 2>&1)"       = X""
minos-config -c config; test X"${?}"                         = X"1"
test X"$(minos-config -c config -d 2>&1)"                    = X""
minos-config -c config -d; test X"${?}"                      = X"1"
printf "%s %s\\n" "key" "value" > config
test X"$(minos-config -c config -d 2>&1 | awk '{print $1}')" = X"key"
test X"$(printf "%s" '-c config -d' | minos-config 2>&1 | awk '{print $2}')" = X"value"
minos-config -c config -d; test X"${?}"           = X"0"
test X"$(minos-config -c config key 2>&1)"        = X"value"
minos-config -c config key; test X"${?}"          = X"0"
test X"$(minos-config -c config value 2>&1)"      = X""
minos-config -c config value; test X"${?}"        = X"1"
printf "%s %s\\n" "key1" "value1" >> config
test X"$(minos-config -c config -d 2>&1 | wc -l)" = X"2"
minos-config -c config -d; test X"${?}"           = X"0"
test X"$(minos-config -c config key1 2>&1)"       = X"value1"
minos-config -c config key1; test X"${?}"         = X"0"
test X"$(minos-config -c config value 2>&1)"      = X""
minos-config -c config value; test X"${?}"        = X"1"
test X"$(minos-config -c config key 2>&1)"        = X"value"
minos-config -c config key; test X"${?}"          = X"0"
@end

@begin{minos-help}
minos-help -h; test X"${?}"                               = X"1"
printf "%s" '-h' | minos-help; test X"${?}"               = X"1"
minos-help -c; test X"${?}"                               = X"1"
printf "%s" '-c' | minos-help; test X"${?}"               = X"1"
minos-help --help ; test X"${?}"                          = X"1"
printf "%s" '--help' | minos-help; test X"${?}"           = X"1"
test X"$(minos-help -h 2>&1|head -1)"                     = X"Usage: minos-help [options]"
test X"$(printf "%s" '-h' | minos-help 2>&1|head -1)"     = X"Usage: minos-help [options]"
test X"$(minos-help --help 2>&1|head -1)"                 = X"Usage: minos-help [options]"
test X"$(printf "%s" '--help' | minos-help 2>&1|head -1)" = X"Usage: minos-help [options]"
test X"$(minos-help -c 2>&1|head -1)"                     = X"minos-help: unrecognized option \`-c'"
test X"$(printf "%s" '-c' | minos-help 2>&1|head -1)"     = X"minos-help: unrecognized option \`-c'"
minos-help & sleep 0.3 && test ! -z "$(ps aux | awk '/got it/ {if ($0 !~ "awk") print $2}')"
minos-help; test X"${?}"                                  = X"1"
kill "$(ps aux | awk '/got it/ {if ($0 !~ "awk") print $2}')"
test -z "$(ps aux | awk '/got it/ {if ($0 !~ "awk") print $2}')"
@end

@begin{minos-statusbar}
minos-statusbar -h; test X"${?}"                               = X"1"
printf "%s" '-h' | minos-statusbar; test X"${?}"               = X"1"
minos-statusbar -c; test X"${?}"                               = X"1"
printf "%s" '-c' | minos-statusbar; test X"${?}"               = X"1"
minos-statusbar --help ; test X"${?}"                          = X"1"
printf "%s" '--help' | minos-statusbar; test X"${?}"           = X"1"
test X"$(minos-statusbar -h 2>&1|head -1)"                     = X"Usage: minos-statusbar [options]"
test X"$(printf "%s" '-h' | minos-statusbar 2>&1|head -1)"     = X"Usage: minos-statusbar [options]"
test X"$(minos-statusbar --help 2>&1|head -1)"                 = X"Usage: minos-statusbar [options]"
test X"$(printf "%s" '--help' | minos-statusbar 2>&1|head -1)" = X"Usage: minos-statusbar [options]"
test X"$(minos-statusbar -c 2>&1|head -1)"                     = X"minos-statusbar: unrecognized option \`-c'"
test X"$(printf "%s" '-c' | minos-statusbar 2>&1|head -1)"     = X"minos-statusbar: unrecognized option \`-c'"
@end

# vim: set ts=8 sw=4 tw=0 ft=sh :
